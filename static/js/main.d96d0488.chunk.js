(this["webpackJsonpwaterflow-simulator"]=this["webpackJsonpwaterflow-simulator"]||[]).push([[0],{73:function(t,e,r){},74:function(t,e,r){},83:function(t,e,r){"use strict";r.r(e);var c=r(0),n=r.n(c),i=r(23),a=r.n(i),o=(r(73),r(15)),s=(r.p,r(74),r(119)),l="UPDATE_NO_OF_ROWS",u="UPDATE_NO_OF_COLUMNS",b="UPDATE_NO_OF_OBSTRUCTIONS",j="UPDATE_NO_OF_STARTPOINT",d="UPDATE_GRID",O="INSERT_OBSTACLE",h="SIMULATEFLOW",x="RESET_USED_OBSTRUCTION",m=function(t){return{type:j,startPoint:t}},g=r(13),f=r(2);function v(t){var e=t.value,r=t.x,n=t.y,i=t.isStartPoint,a=t.isSimulate,l=Object(g.b)(),u=Object(g.c)((function(t){return t.simulator})),b=(u.rows,u.columns,u.obstructions,u.startPoint),j=(u.grid,Object(c.useState)(!1)),d=Object(o.a)(j,2),x=d[0],v=d[1];Object(c.useEffect)((function(){b&&l({type:h})}),[b]);var p="white";p=0===e?"white":-1===e?"black":1===e?"lightblue":"black";var y=Object(s.a)((function(){return{accept:["OBSTACLE"],drop:function(t,e){if(!e.didDrop()){var c=e.getItem();console.log(c),l(function(t,e,r){return{type:O,x:t,y:e,obstructionId:r}}(r,n,c.value))}},collect:function(t){t.isOver()}}})),S=Object(o.a)(y,2),w=S[0],C=S[1];console.log(w);return Object(f.jsx)("div",{ref:C,style:{backgroundColor:i?"blue":p,cursor:i&&a?"pointer":"default",opacity:i&&x&&a?.5:1,color:p,width:"100%",height:"100%",borderStyle:"solid",borderWidth:.5,borderColor:"black"},onClick:function(){i&&a&&(null===b||b&&-1===b.x&&-1===b.y)&&l(m({x:r,y:n}))},onMouseEnter:function(){v(!0)},onMouseLeave:function(){v(!1)},children:""})}function p(t){var e=Object(g.b)(),r=(t.setCurrentStep,t.isSimulate),n=Object(g.c)((function(t){return t.simulator})),i=n.rows,a=n.columns,o=(n.obstructions,n.startPoint,n.grid);Object(c.useEffect)((function(){for(var t=[],r=0;r<i+1;r++){t[r]=[];for(var c=0;c<a;c++)t[r][c]=0}e({type:d,grid:t})}),[]);var s=[];if(o)for(var l=0;l<o.length;l++){var u=o[l];console.log(u);for(var b=0;b<u.length;b++)s.push(Object(f.jsx)("div",{style:{width:100/u.length+"%",height:100/o.length+"%"},children:Object(f.jsx)(v,{value:o[l][b],x:l,y:b,isStartPoint:0===l,isSimulate:r})},l+"-"+b))}return Object(f.jsx)("div",{children:Object(f.jsx)("div",{style:{width:"300px",height:"300px",display:"flex",flexWrap:"wrap"},children:s})})}var y=r(112),S=r(122),w=r(86),C=r(113),k=r(121),T=Object(y.a)({root:{width:"100%"}});function P(t){var e=T(),r=Object(g.b)(),c=t.setCurrentStep,n=Object(g.c)((function(t){return t.simulator})),i=n.rows,a=n.columns,o=n.obstructions,s=function(t,e){var c=t.target.id;console.log(t.target.id,e),"rows-slider"===c?r({type:l,rows:e}):"columns-slider"===c?r({type:u,columns:e}):"obstruction-slider"===c&&r({type:b,obstructions:e})};return Object(f.jsx)("div",{className:e.root,children:Object(f.jsxs)(C.a,{container:!0,spacing:2,direction:"column",children:[Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(w.a,{id:"create-grid",variant:"h6",gutterBottom:!0,children:"Grid Creation"})}),Object(f.jsxs)(C.a,{item:!0,children:[Object(f.jsx)(w.a,{id:"rows-slider-label",gutterBottom:!0,children:"Number of rows"}),Object(f.jsx)(S.a,{value:i,id:"rows-slider",defaultValue:i,"aria-labelledby":"rows-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:s})]}),Object(f.jsxs)(C.a,{item:!0,children:[Object(f.jsx)(w.a,{id:"columns-slider-label",gutterBottom:!0,children:"Number of columns"}),Object(f.jsx)(S.a,{value:a,id:"columns-slider",defaultValue:a,"aria-labelledby":"columns-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:s})]}),Object(f.jsxs)(C.a,{item:!0,children:[Object(f.jsx)(w.a,{id:"obstruction-slider-label",gutterBottom:!0,children:"Number of obstruction"}),Object(f.jsx)(S.a,{value:o,id:"obstruction-slider",defaultValue:o,"aria-labelledby":"obstruction-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:s})]}),Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(k.a,{variant:"contained",color:"primary",onClick:function(){c(1)},children:"Next"})})]})})}var E=r(6),D=r(123),N=r(117),_=r(115),B=r(118),L=r(60),I=r.n(L),A=r(116),U=r(120);function F(t){var e=t.value,r=Object(U.a)({type:"OBSTACLE",item:{type:"OBSTACLE",value:e},collect:function(t){return{isDragging:!!t.isDragging()}}}),c=Object(o.a)(r,2),n=c[0].isDragging,i=c[1];return Object(f.jsx)("div",{ref:i,style:{opacity:n?.5:1,cursor:"grab",backgroundColor:"black",width:"20px",height:"20px",borderStyle:"solid",borderWidth:.5,borderColor:"black",margin:5},children:e})}function R(t){Object(g.b)(),t.setCurrentStep;var e=Object(g.c)((function(t){return t.simulator})),r=(e.rows,e.columns,e.obstructions),c=e.usedObstructions,n=[];if(r)for(var i=1;i<=r;i++)c.includes(i)||n.push(i);for(var a=[],o=0;o<5;o++)for(var s=0;s<2;s++)a.push();return Object(f.jsx)("div",{children:n.map((function(t){return Object(f.jsx)("div",{style:{width:"50%",height:"20%"},children:Object(f.jsx)(F,{value:t},t)},"Obstruction-"+t)}))})}var W=r(114),M=r(61),z=Object(y.a)({root:{width:"100%"}});function V(t){z();var e=Object(g.b)(),r=Object(g.c)((function(t){return t.simulator})),n=(r.obstructions,r.usedObstructions),i=r.startPoint,a=Object(c.useState)(!1),s=Object(o.a)(a,2),l=s[0],u=s[1],b=t.setCurrentStep,j=function(){e(m({x:-1,y:-1}))};return Object(f.jsx)(W.a,{backend:M.a,children:Object(f.jsxs)(C.a,{container:!0,spacing:3,justify:"center",children:[Object(f.jsx)(C.a,{item:!0,md:12,children:Object(f.jsx)(w.a,{id:"create-grid",align:"center",gutterBottom:!0,children:l?"Select the workflow start point by clicking on any of the blue box":"Drag the obstruction and place it inside the grid (white boxes)"})}),Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(p,Object(E.a)(Object(E.a)({},t),{},{isSimulate:l}))}),!l&&Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(R,{usedObstructions:n})}),Object(f.jsxs)(C.a,{item:!0,container:!0,spacing:2,justify:"center",children:[Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(k.a,{size:"small",variant:"outlined",color:"secondary",onClick:function(){if(l)return u(!1),void j();b(0)},children:"Back"})}),l&&Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(k.a,{disabled:!i||-1===i.x||-1===i.y,size:"small",variant:"contained",color:"secondary",onClick:j,children:"Reset start point"})}),!l&&Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(k.a,{disabled:0===n.length,size:"small",variant:"outlined",color:"secondary",onClick:function(){e({type:x})},children:"Reset Obstacles"})}),!l&&Object(f.jsx)(C.a,{item:!0,children:Object(f.jsx)(k.a,{disabled:0===n.length,size:"small",variant:"contained",color:"primary",onClick:function(){u(!0)},children:"Start simulation"})})]})]})})}function G(){return Object(f.jsxs)(w.a,{variant:"body2",color:"textSecondary",align:"center",children:["Created by ",Object(f.jsx)(_.a,{color:"inherit",href:"https://material-ui.com/"})," Subramanyam S S","."]})}var J=Object(y.a)((function(t){return{paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:"blue"},form:{width:"100%",marginTop:t.spacing(1)},submit:{margin:t.spacing(3,0,2)}}}));function q(t){var e=J(),r=Object(c.useState)(0),n=Object(o.a)(r,2),i=n[0],a=n[1];return Object(f.jsxs)(A.a,{component:"main",maxWidth:"xs",children:[Object(f.jsx)(N.a,{}),Object(f.jsxs)("div",{className:e.paper,children:[Object(f.jsx)(D.a,{className:e.avatar,children:Object(f.jsx)(I.a,{})}),Object(f.jsx)(w.a,{gutterBottom:!0,component:"h1",variant:"h5",children:"Waterflow Simulator"}),Object(f.jsx)("br",{}),0===i&&Object(f.jsx)("form",{className:e.form,noValidate:!0,children:Object(f.jsx)(P,Object(E.a)(Object(E.a)({},t),{},{setCurrentStep:a}))}),1===i&&Object(f.jsx)(V,Object(E.a)(Object(E.a)({},t),{},{setCurrentStep:a}))]}),Object(f.jsx)(B.a,{mt:8,children:Object(f.jsx)(G,{})})]})}var H=function(){var t=Object(c.useState)([[0,2,0],[0,0,0],[0,0,0]]),e=Object(o.a)(t,2),r=(e[0],e[1],Object(c.useState)(0)),n=Object(o.a)(r,2),i=n[0],a=(n[1],Object(c.useState)(0)),s=Object(o.a)(a,2),l=s[0],u=(s[1],Object(c.useState)(0)),b=Object(o.a)(u,2),j=b[0];return b[1],Object(f.jsx)("div",{children:Object(f.jsx)(q,{rows:i,columns:l,obstaclesCount:j})})},K=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,126)).then((function(e){var r=e.getCLS,c=e.getFID,n=e.getFCP,i=e.getLCP,a=e.getTTFB;r(t),c(t),n(t),i(t),a(t)}))},Q=r(27),X=function t(e,r){return console.log(r),0===e[r.x][r.y]&&(e[r.x][r.y]=1),r.x===e.length-1?e:0===e[r.x+1][r.y]?t(e,{x:r.x+1,y:r.y}):0!==r.x&&-1===e[r.x+1][r.y]?(0===e[r.x][r.y+1]&&(e=t(e,{x:r.x,y:r.y+1})),0===e[r.x][r.y-1]&&(e=t(e,{x:r.x,y:r.y-1})),e):e},Y={rows:1,columns:1,obstructions:1,usedObstructions:[],startPoint:null,grid:null};var Z=Object(Q.a)({simulator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(E.a)(Object(E.a)({},t),{},{rows:e.rows});case u:return Object(E.a)(Object(E.a)({},t),{},{columns:e.columns});case b:return Object(E.a)(Object(E.a)({},t),{},{obstructions:e.obstructions});case x:for(var r=t.grid,c=0;c<t.rows+1;c++)for(var n=0;n<t.columns;n++)-1===r[c][n]&&(r[c][n]=0);return Object(E.a)(Object(E.a)({},t),{},{grid:r,usedObstructions:[]});case j:return Object(E.a)(Object(E.a)({},t),{},{startPoint:e.startPoint});case d:return Object(E.a)(Object(E.a)({},t),{},{grid:e.grid,usedObstructions:[]});case O:var i=t.grid;return i[e.x][e.y]=-1,Object(E.a)(Object(E.a)({},t),{},{usedObstructions:t.usedObstructions.concat(e.obstructionId),grid:i});case h:console.log(e.startPoint);var a=t.grid;if(-1===t.startPoint.x&&-1===t.startPoint.y){for(var o=0;o<t.rows+1;o++)for(var s=0;s<t.columns;s++)1===a[o][s]&&(a[o][s]=0);return Object(E.a)(Object(E.a)({},t),{},{grid:a})}return a=X(t.grid,t.startPoint),console.log(a),Object(E.a)(Object(E.a)({},t),{},{grid:a});default:return t}}}),$=Object(Q.b)(Z);a.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(g.a,{store:$,children:Object(f.jsx)(H,{})})}),document.getElementById("root")),K()}},[[83,1,2]]]);
//# sourceMappingURL=main.d96d0488.chunk.js.map