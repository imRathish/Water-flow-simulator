(this["webpackJsonpwaterflow-simulator"]=this["webpackJsonpwaterflow-simulator"]||[]).push([[0],{72:function(t,e,r){},73:function(t,e,r){},82:function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),c=r(23),a=r.n(c),s=(r(72),r(73),r(22)),o=r(100),l=r(103),u=r(104),b=r(110),d=r(105),j=r(59),O=r.n(j),x=r(98),h=r(99),g=r(109),m=r(108),f=r(13),v="UPDATE_NO_OF_ROWS",p="UPDATE_NO_OF_COLUMNS",y="UPDATE_NO_OF_OBSTRUCTIONS",S="UPDATE_NO_OF_STARTPOINT",w="UPDATE_GRID",C="INSERT_OBSTACLE",T="SIMULATEFLOW",k="RESET_USED_OBSTRUCTION",D="UPDATE_CELL",E=function(t){return{type:S,startPoint:t}},P=r(2),_=Object(x.a)({root:{width:"100%"}});function B(t){var e=_(),r=Object(f.b)(),n=t.setCurrentStep,i=Object(f.c)((function(t){return t.simulator})),c=i.rows,a=i.columns,s=i.obstructions,l=function(t,e){var n=t.target.id;console.log(t.target.id,e),"rows-slider"===n?r({type:v,rows:e}):"columns-slider"===n?r({type:p,columns:e}):"obstruction-slider"===n&&r({type:y,obstructions:e})};return Object(P.jsx)("div",{className:e.root,children:Object(P.jsxs)(h.a,{container:!0,spacing:3,direction:"column",children:[Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(o.a,{align:"center",id:"create-grid",variant:"h6",gutterBottom:!0,children:"Grid Creation"})}),Object(P.jsxs)(h.a,{item:!0,children:[Object(P.jsx)(o.a,{id:"rows-slider-label",gutterBottom:!0,children:"Number of rows"}),Object(P.jsx)(g.a,{value:c,id:"rows-slider",defaultValue:c,"aria-labelledby":"rows-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:l})]}),Object(P.jsxs)(h.a,{item:!0,children:[Object(P.jsx)(o.a,{id:"columns-slider-label",gutterBottom:!0,children:"Number of columns"}),Object(P.jsx)(g.a,{value:a,id:"columns-slider",defaultValue:a,"aria-labelledby":"columns-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:l})]}),Object(P.jsxs)(h.a,{item:!0,children:[Object(P.jsx)(o.a,{id:"obstruction-slider-label",gutterBottom:!0,children:"Number of obstruction"}),Object(P.jsx)(g.a,{value:s,id:"obstruction-slider",defaultValue:s,"aria-labelledby":"obstruction-slider-label",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:10,onChange:l})]}),Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){n(1)},children:"Next"})})]})})}var N=r(6),L=r(106);function A(t){var e=t.value,r=t.x,i=t.y,c=t.isStartPoint,a=t.isSimulate,o=Object(f.b)(),l=Object(f.c)((function(t){return t.simulator})).startPoint,u=Object(n.useState)(!1),b=Object(s.a)(u,2),d=b[0],j=b[1];Object(n.useEffect)((function(){l&&o({type:T})}),[l]);var O=Object(L.a)((function(){return{accept:["OBSTACLE"],drop:function(t,e){if(!e.didDrop()){var n=e.getItem();o(function(t,e,r){return{type:C,x:t,y:e,obstructionId:r}}(r,i,n.value))}},collect:function(t){return{isOver:t.isOver(),canDrop:t.canDrop()}}}})),x=Object(s.a)(O,2),h=x[0],g=(h.canDrop,h.isOver),m=x[1];return Object(P.jsx)("div",{ref:c||-1===e?null:m,style:{backgroundColor:1===e?"#2B78E3":c?"#cadef9":g&&0===e?"lightgreen":-1===e?"black":"white",cursor:c&&a?"pointer":"default",opacity:c&&d&&a?.5:1,width:"100%",height:"100%",borderStyle:"solid",borderWidth:.5,borderColor:"black"},onClick:function(){c&&a&&(null===l||l&&-1===l.x&&-1===l.y)&&o(E({x:r,y:i}))},onMouseEnter:function(){j(!0)},onMouseLeave:function(){j(!1)},children:""})}function I(t){var e=Object(f.b)(),r=t.isSimulate,i=Object(f.c)((function(t){return t.simulator})),c=i.rows,a=i.columns,s=i.grid;Object(n.useEffect)((function(){var t;e((t=o(c,a),{type:w,grid:t}))}),[]);var o=function(t,e){for(var r=[],n=0;n<t+1;n++){r[n]=[];for(var i=0;i<e;i++)r[n][i]=0}return r};return Object(P.jsx)("div",{style:{width:"300px",height:"300px",display:"flex",flexWrap:"wrap"},children:function(){var t=[];if(s)for(var e=0;e<s.length;e++){var n=s[e];console.log(n);for(var i=0;i<n.length;i++)t.push(Object(P.jsx)("div",{style:{width:100/n.length+"%",height:100/s.length+"%"},children:Object(P.jsx)(A,{value:s[e][i],x:e,y:i,isStartPoint:0===e,isSimulate:r})},e+"-"+i))}return t}()})}var U=r(102),F=r(60),R=r(107);function W(t){var e=t.value,r=Object(R.a)({type:"OBSTACLE",item:{type:"OBSTACLE",value:e},collect:function(t){return{isDragging:!!t.isDragging()}}}),n=Object(s.a)(r,2),i=n[0].isDragging,c=n[1];return Object(P.jsx)("div",{ref:c,style:{opacity:i?.5:1,cursor:"grab",backgroundColor:"black",width:"20px",height:"20px",borderStyle:"solid",borderWidth:.5,borderColor:"black",margin:5},children:" "})}function M(){var t=Object(f.c)((function(t){return t.simulator})),e=t.obstructions,r=t.usedObstructions,n=[];if(e)for(var i=1;i<=e;i++)r.includes(i)||n.push(i);for(var c=[],a=0;a<5;a++)for(var s=0;s<2;s++)c.push();return Object(P.jsx)("div",{children:n.map((function(t){return Object(P.jsx)("div",{style:{width:"50%",height:"20%"},children:Object(P.jsx)(W,{value:t},t)},"Obstruction-"+t)}))})}function z(t){var e=Object(f.b)(),r=Object(f.c)((function(t){return t.simulator})),i=r.usedObstructions,c=r.startPoint,a=Object(n.useState)(!1),l=Object(s.a)(a,2),u=l[0],b=l[1],d=t.setCurrentStep,j=function(){e(E({x:-1,y:-1}))};return Object(P.jsx)(U.a,{backend:F.a,children:Object(P.jsxs)(h.a,{container:!0,spacing:3,justify:"center",children:[Object(P.jsx)(h.a,{item:!0,md:12,children:Object(P.jsx)(o.a,{id:"create-grid",align:"center",gutterBottom:!0,children:u?"Select the workflow start point by clicking on any of the blue box":"Drag the obstruction and place it inside the grid (white boxes)"})}),Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(I,Object(N.a)(Object(N.a)({},t),{},{isSimulate:u}))}),!u&&Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(M,{usedObstructions:i})}),Object(P.jsxs)(h.a,{item:!0,container:!0,spacing:2,justify:"center",children:[Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(m.a,{size:"small",variant:"outlined",onClick:function(){if(u)return b(!1),void j();d(0)},children:"Back"})}),u&&Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(m.a,{disabled:!c||-1===c.x||-1===c.y,size:"small",variant:"outlined",onClick:j,children:"Reset start point"})}),!u&&Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(m.a,{disabled:0===i.length,size:"small",variant:"outlined",onClick:function(){e({type:k})},children:"Reset Obstacles"})}),!u&&Object(P.jsx)(h.a,{item:!0,children:Object(P.jsx)(m.a,{disabled:0===i.length,size:"small",variant:"contained",color:"primary",onClick:function(){b(!0)},children:"Start simulation"})})]})]})})}function V(){return Object(P.jsxs)(o.a,{variant:"body2",color:"textSecondary",align:"center",children:["Created by "," Subramanyam S S","."]})}var G=Object(x.a)((function(t){return{paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:"#0089f5"},form:{width:"100%",marginTop:t.spacing(1)},submit:{margin:t.spacing(3,0,2)}}}));function J(){var t=G(),e=Object(n.useState)(0),r=Object(s.a)(e,2),i=r[0],c=r[1];return Object(P.jsxs)(l.a,{component:"main",maxWidth:"xs",children:[Object(P.jsx)(u.a,{}),Object(P.jsxs)("div",{className:t.paper,children:[Object(P.jsx)(b.a,{className:t.avatar,children:Object(P.jsx)(O.a,{})}),Object(P.jsx)(o.a,{gutterBottom:!0,component:"h1",variant:"h5",children:"Waterflow Simulator"}),Object(P.jsx)("br",{}),0===i&&Object(P.jsx)(B,{setCurrentStep:c}),1===i&&Object(P.jsx)(z,{setCurrentStep:c})]}),Object(P.jsx)(d.a,{mt:8,children:Object(P.jsx)(V,{})})]})}var q=function(){return Object(P.jsx)("div",{children:Object(P.jsx)(J,{})})},H=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,113)).then((function(e){var r=e.getCLS,n=e.getFID,i=e.getFCP,c=e.getLCP,a=e.getTTFB;r(t),n(t),i(t),c(t),a(t)}))},K=r(27),Q=function t(e,r){return console.log(r),0===e[r.x][r.y]&&(e[r.x][r.y]=1),r.x===e.length-1?e:0===e[r.x+1][r.y]?t(e,{x:r.x+1,y:r.y}):0!==r.x&&-1===e[r.x+1][r.y]?(0===e[r.x][r.y+1]&&(e=t(e,{x:r.x,y:r.y+1})),0===e[r.x][r.y-1]&&(e=t(e,{x:r.x,y:r.y-1})),e):e},X={rows:1,columns:1,obstructions:1,usedObstructions:[],startPoint:null,grid:null};var Y=Object(K.a)({simulator:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(N.a)(Object(N.a)({},t),{},{rows:e.rows});case p:return Object(N.a)(Object(N.a)({},t),{},{columns:e.columns});case y:return Object(N.a)(Object(N.a)({},t),{},{obstructions:e.obstructions});case k:for(var r=t.grid,n=0;n<t.rows+1;n++)for(var i=0;i<t.columns;i++)-1===r[n][i]&&(r[n][i]=0);return Object(N.a)(Object(N.a)({},t),{},{grid:r,usedObstructions:[]});case S:return Object(N.a)(Object(N.a)({},t),{},{startPoint:e.startPoint});case w:return Object(N.a)(Object(N.a)({},t),{},{grid:e.grid,usedObstructions:[]});case C:var c=t.grid;return c[e.x][e.y]=-1,Object(N.a)(Object(N.a)({},t),{},{usedObstructions:t.usedObstructions.concat(e.obstructionId),grid:c});case T:var a=t.grid;if(console.log(a),-1===t.startPoint.x&&-1===t.startPoint.y){for(var s=0;s<a.length;s++)for(var o=a[s],l=0;l<o.length;l++)1===a[s][l]&&(a[s][l]=0);return Object(N.a)(Object(N.a)({},t),{},{grid:a})}return a=Q(t.grid,t.startPoint),Object(N.a)(Object(N.a)({},t),{},{grid:a});case D:var u=t.grid;return u[e.x][e.y]=e.value,Object(N.a)(Object(N.a)({},t),{},{grid:u});default:return t}}}),Z=Object(K.b)(Y);a.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(f.a,{store:Z,children:Object(P.jsx)(q,{})})}),document.getElementById("root")),H()}},[[82,1,2]]]);
//# sourceMappingURL=main.8b40d2e6.chunk.js.map